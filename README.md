# Death Game Mod

Серверный Fabric мод для Minecraft 1.21.4 с секретными правилами, которые мгновенно убивают игроков.

## Требования

- Minecraft 1.21.4
- Fabric Loader 0.18.4+
- Fabric API 0.119.4+1.21.4
- Java 21

## Сборка

1. Скачайте gradle-wrapper.jar (если отсутствует):
   ```
   https://github.com/gradle/gradle/raw/v8.8.0/gradle/wrapper/gradle-wrapper.jar
   ```
   Положите в `gradle/wrapper/gradle-wrapper.jar`

2. Соберите мод:
   ```bash
   ./gradlew build
   # или на Windows:
   gradlew.bat build
   ```

Готовый JAR файл: `build/libs/deathgame-1.0.0.jar`

## Команды

### Для игроков
| Команда | Описание |
|---------|----------|
| `/participate` | Присоединиться к игре |

### Для администраторов (permission level 2+)
| Команда | Описание |
|---------|----------|
| `/deathgame start` | Запустить игру |
| `/deathgame stop` | Остановить игру |
| `/deathgame reset` | Полный сброс (участники, счёт, раскрытые правила) |
| `/deathgame kick <player>` | Удалить игрока из участников |
| `/deathgame status` | Показать статус игры |
| `/rule enable <1-10>` | Включить правило |
| `/rule disable <1-10>` | Отключить правило |
| `/rule reveal <1-10>` | Раскрыть правило игрокам |
| `/rule list` | Список всех правил и их статус |

## Правила

Все правила секретные. При смерти игрока показывается только номер правила, пока оно не раскрыто.

| # | Название | Описание |
|---|----------|----------|
| 1 | Simultaneous Jump | Если 2+ игрока прыгнут в один и тот же тик - оба умирают |
| 2 | No Shift-Craft | Нельзя забирать результат крафта через Shift - только обычный клик |
| 3 | Mutual Gaze | Если оба игрока смотрят друг на друга одновременно - оба умирают |
| 4 | Fall Damage Transfer | При смертельном падении выживаешь с 0.5 сердца, остальные участники умирают |
| 5 | Empty Hotbar | Если все 9 слотов хотбара пусты 30 секунд - смерть |
| 6 | Berlord Items | Предметы, выброшенные berlord'ом, убивают других при подборе |
| 7 | Hunger Overflow | Если еда превысит 20 food points (не saturation) - смерть |
| 8 | Same Y Level | Если все 3 игрока на одном Y уровне 5 секунд (±0.001) - все умирают |
| 9 | Same X/Z Line | Если все 3 на одной X или Z координате (block precision) - все умирают |
| 10 | Same Block Mining | Смерть, если сломаешь блок того же типа, который последним сломал другой игрок |

## Условия победы

1. **Убить Эндер-дракона**
2. **Отгадать все 10 правил** - игроки угадывают голосом, гейммастер раскрывает через `/rule reveal`

При победе показывается титульное сообщение и запускаются фейерверки.

## Scoreboard

Игроки отображаются в сайдбаре "Death Game" с количеством триггеров правил.

## Особенности правил

### Правило 4 (Fall Damage)
- Счётчик триггера увеличивается только тому, кто упал
- Остальные участники умирают без увеличения их счётчика

### Правило 6 (berlord)
- Работает по UUID `3a5038fa-2160-4c6a-8bcf-f1dc7bf471d5` ИЛИ по имени `berlord` (без учёта регистра)
- Заражённые предметы безопасны при передаче через сундуки/контейнеры
- При смерти berlord'а его дроп не заражён (создаются новые ItemEntity)
- Если berlord подберёт заражённый предмет обратно - он очищается
- Заражение хранится в NBT предмета (custom_data)

### Правила 8 и 9
- Работают только когда ровно 3 участника онлайн
- Все должны быть в одном измерении
- Правило 8: проверка Y с точностью до 0.001 блока
- Правило 9: проверка X/Z с точностью до целого блока

### Правило 10
- У каждого игрока "память" на 1 последний сломанный блок
- Проверяется тип блока, не конкретная позиция
- Пример: игрок A сломал Stone, игрок B ломает Stone = B умирает

## Игровой процесс

1. Игроки регистрируются через `/participate` (максимум 3)
2. Админ запускает игру через `/deathgame start`
3. Игроки должны выживать, не нарушая секретные правила
4. При нарушении правила игрок мгновенно умирает
5. Игроки пытаются угадать правила
6. При угадывании админ раскрывает правило через `/rule reveal`
7. Победа при убийстве дракона или угадывании всех 10 правил

## Лицензия

MIT
